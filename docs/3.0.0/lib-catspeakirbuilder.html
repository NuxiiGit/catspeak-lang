<!DOCTYPE html>
<!--
    AUTOMATICALLY GENERATED USING THE CATSPEAK BOOK GENERATOR:
    https://github.com/katsaii/catspeak-lang
-->
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="author" content="Katsaii"><meta name="description" content="The Catspeak library documentation."><title>Catspeak Reference :: CatspeakIRBuilder of Library Reference</title><link rel="stylesheet" href="./style.css"></head><body><header><h1>Catspeak Reference</h1><nav><ul><li><a href="hom-welcome.html">Home</a></li><li><a href="lib-init.html"><mark>Library Reference</mark></a></li></ul></nav><hr></header><article id="chapter-content"><aside id="chapters"><h2>Chapters</h2><ul><li><a href="lib-init.html">init</a></li><li><a href="lib-environment.html">environment</a><ul><li><a href="lib-catspeakenvironment.html">CatspeakEnvironment</a></li></ul></li><li><a href="lib-presets.html">presets</a><ul><li><a href="lib-catspeakpreset.html">CatspeakPreset</a></li></ul></li><li><a href="lib-location.html">location</a></li><li><a href="lib-lexer.html">lexer</a><ul><li><a href="lib-catspeaktoken.html">CatspeakToken</a></li></ul></li><li><a href="lib-parser.html">parser</a><ul><li><a href="lib-catspeakparser.html">CatspeakParser</a></li></ul></li><li><a href="lib-codegen.html">codegen</a><ul><li><a href="lib-catspeakforeigninterface.html">CatspeakForeignInterface</a></li><li><a href="lib-catspeakgmlcompiler.html">CatspeakGMLCompiler</a></li></ul></li><li><a href="lib-ir.html">ir</a><ul><li><a href="lib-catspeakasgbuilder.html">CatspeakASGBuilder</a></li><li><a href="lib-catspeakirbuilder.html"><mark>CatspeakIRBuilder</mark></a></li><li><a href="lib-catspeakterm.html">CatspeakTerm</a></li></ul></li><li><a href="lib-operators.html">operators</a><ul><li><a href="lib-catspeakoperator.html">CatspeakOperator</a></li><li><a href="lib-catspeakassign.html">CatspeakAssign</a></li></ul></li><li><a href="lib-alloc.html">alloc</a></li></ul></aside><aside id="contents"><h2>Contents</h2><ul><li><a href="#get">get</a><ul><li><a href="#s">s</a></li></ul></li><li><a href="#createvalue">createValue</a></li><li><a href="#createarray">createArray</a></li><li><a href="#createstruct">createStruct</a></li><li><a href="#createif">createIf</a></li><li><a href="#creatematch">createMatch</a></li><li><a href="#createand">createAnd</a></li><li><a href="#createor">createOr</a></li><li><a href="#createwhile">createWhile</a></li><li><a href="#createuse">createUse</a></li><li><a href="#createreturn">createReturn</a></li><li><a href="#createbreak">createBreak</a></li><li><a href="#createcontinue">createContinue</a></li><li><a href="#createcall">createCall</a></li><li><a href="#createcallnew">createCallNew</a></li><li><a href="#createget">createGet</a></li><li><a href="#createaccessor">createAccessor</a></li><li><a href="#createproperty">createProperty</a></li><li><a href="#createbinary">createBinary</a></li><li><a href="#createunary">createUnary</a></li><li><a href="#createself">createSelf</a></li><li><a href="#createassign">createAssign</a></li><li><a href="#createstatement">createStatement</a></li><li><a href="#alloclocal">allocLocal</a></li><li><a href="#allocarg">allocArg</a></li><li><a href="#pushblock">pushBlock</a></li><li><a href="#popblock">popBlock</a></li><li><a href="#pushfunction">pushFunction</a><ul><li><a href="#scopestop">ScopesTop</a></li><li><a href="#_">_</a></li><li><a href="#_">_</a></li><li><a href="#_">_</a></li><li><a href="#_">_</a></li><li><a href="#_">_</a></li></ul></li><li><a href="#popfunction">popFunction</a><ul><li><a href="#s">s</a></li><li><a href="#scopestop">ScopesTop</a></li></ul></li></ul></aside><main><article><h1 class="chapter-title">CatspeakIRBuilder</h1><pre><code>function CatspeakIRBuilder() constructor { }</code></pre><p>Handles the generation and optimisation of a syntax graph.</p><section><h1 class="heading" id="get"><a href="#get">§</a> get</h1><pre><code>static get = function() -> struct</code></pre><p>Returns the underlying syntax graph for this builder.</p><section><h2 class="heading" id="s"><a href="#s">§</a> s</h2><pre><code>function s()</code></pre><p>Undocumented!</p></section></section><section><h1 class="heading" id="createvalue"><a href="#createvalue">§</a> createValue</h1><pre><code>static createValue = function(
  value : any,
  location? : real,
) -> struct</code></pre><p>Emits the instruction to return a new constant value.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">value</code></p><p>The value this term should resolve to.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createarray"><a href="#createarray">§</a> createArray</h1><pre><code>static createArray = function(
  values : array,
  location? : real,
) -> struct</code></pre><p>Emits the instruction to create a new array literal.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">values</code></p><p>The values to populate the array with.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createstruct"><a href="#createstruct">§</a> createStruct</h1><pre><code>static createStruct = function(
  values : array,
  location? : real,
) -> struct</code></pre><p>Emits the instruction to create a new struct literal.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">values</code></p><p>The key-value pairs to populate the struct with.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createif"><a href="#createif">§</a> createIf</h1><pre><code>static createIf = function(
  condition : struct,
  ifTrue : struct,
  ifFalse : struct,
  location? : real,
) -> struct</code></pre><p>Emits the instruction for an if statement.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">condition</code></p><p>The term which evaluates to the condition of the if statement.</p></li><li><p><code class="inline-code">ifTrue</code></p><p>The term which evaluates if the condition of the if statement is
true.</p></li><li><p><code class="inline-code">ifFalse</code></p><p>The term which evaluates if the condition of the if statement is
false.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="creatematch"><a href="#creatematch">§</a> createMatch</h1><pre><code>static createMatch = function(
  value : struct,
  arms : array,
  location? : real,
)</code></pre><p>Emits the instruction for a match expression.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">value</code></p><p>The term to evaluate and compare against.</p></li><li><p><code class="inline-code">arms</code></p><p>A list of pairs where the first term is compared against <code class="inline-code">value</code> and the second term is returned if both match.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this match term.</p></li></ul></section><section><h1 class="heading" id="createand"><a href="#createand">§</a> createAnd</h1><pre><code>static createAnd = function(
  eager : struct,
  lazy : struct,
  location? : real,
) -> struct</code></pre><p>Emits the instruction for a short-circuiting logical AND expression.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">eager</code></p><p>The term which evaluates immediately.</p></li><li><p><code class="inline-code">lazy</code></p><p>The term which evaluates if the first term is true.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createor"><a href="#createor">§</a> createOr</h1><pre><code>static createOr = function(
  eager : struct,
  lazy : struct,
  location? : real,
) -> struct</code></pre><p>Emits the instruction for a short-circuiting logical OR expression.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">eager</code></p><p>The term which evaluates immediately.</p></li><li><p><code class="inline-code">lazy</code></p><p>The term which evaluates if the first term is false.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createwhile"><a href="#createwhile">§</a> createWhile</h1><pre><code>static createWhile = function(
  condition : struct,
  body : struct,
  location? : real,
) -> struct</code></pre><p>Emits the instruction for a while loop.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">condition</code></p><p>The term which evaluates to the condition of the while loop.</p></li><li><p><code class="inline-code">body</code></p><p>The body of the while loop.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createuse"><a href="#createuse">§</a> createUse</h1><pre><code>static createUse = function(
  condition : struct,
  body : struct,
  location? : real,
) -> struct</code></pre><p>Emits the instruction for a context managed <code class="inline-code">use</code> block.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">condition</code></p><p>The term which evaluates to the condition of the context block.</p></li><li><p><code class="inline-code">body</code></p><p>The body of the block.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createreturn"><a href="#createreturn">§</a> createReturn</h1><pre><code>static createReturn = function(
  value : struct,
  location? : real,
) -> struct</code></pre><p>Emits the instruction to return a value from the current function.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">value</code></p><p>The instruction for the value to return.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createbreak"><a href="#createbreak">§</a> createBreak</h1><pre><code>static createBreak = function(
  value : struct,
  location? : real,
) -> struct</code></pre><p>Emits the instruction to break from the current loop with a specified
value.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">value</code></p><p>The instruction for the value to break with.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createcontinue"><a href="#createcontinue">§</a> createContinue</h1><pre><code>static createContinue = function(
  location? : real,
) -> struct</code></pre><p>Emits the instruction to continue to the next iteration of the current
loop.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createcall"><a href="#createcall">§</a> createCall</h1><pre><code>static createCall = function(
  callee : struct,
  args : struct,
  location? : real,
) -> struct</code></pre><p>Emits the instruction to call a function with a set of arguments.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">callee</code></p><p>The instruction containing the function to call.</p></li><li><p><code class="inline-code">args</code></p><p>The the arguments to pass into the function call.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createcallnew"><a href="#createcallnew">§</a> createCallNew</h1><pre><code>static createCallNew = function(
  callee : struct,
  args : struct,
  location? : real,
) -> struct</code></pre><p>Emits the instruction to call a constructor function with a set of
arguments.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">callee</code></p><p>The instruction containing the function to call.</p></li><li><p><code class="inline-code">args</code></p><p>The the arguments to pass into the function call.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this value term.</p></li></ul></section><section><h1 class="heading" id="createget"><a href="#createget">§</a> createGet</h1><pre><code>static createGet = function(
  name : string,
  location? : real,
) -> struct</code></pre><p>Searches a for a variable with the supplied name and emits a get
instruction for it.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">name</code></p><p>The name of the variable to search for.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this term.</p></li></ul></section><section><h1 class="heading" id="createaccessor"><a href="#createaccessor">§</a> createAccessor</h1><pre><code>static createAccessor = function(
  collection : struct,
  key : struct,
  location? : real,
) -> struct</code></pre><p>Creates an accessor expression.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">collection</code></p><p>The term containing the collection to access.</p></li><li><p><code class="inline-code">key</code></p><p>The term containing the key to access the collection with.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this term.</p></li></ul></section><section><h1 class="heading" id="createproperty"><a href="#createproperty">§</a> createProperty</h1><pre><code>static createProperty = function(
  property : struct,
  location? : real,
) -> struct</code></pre><p>Creates a property expression.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">property</code></p><p>The term containing the property to access.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this term.</p></li></ul></section><section><h1 class="heading" id="createbinary"><a href="#createbinary">§</a> createBinary</h1><pre><code>static createBinary = function(
  operator : enum.CatspeakOperator,
  lhs : string,
  rhs : string,
  location? : real,
) -> struct</code></pre><p>Creates a binary operator.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">operator</code></p><p>The operator type to use.</p></li><li><p><code class="inline-code">lhs</code></p><p>The left-hand side operand.</p></li><li><p><code class="inline-code">rhs</code></p><p>The right-hand side operand.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this term.</p></li></ul></section><section><h1 class="heading" id="createunary"><a href="#createunary">§</a> createUnary</h1><pre><code>static createUnary = function(
  operator : enum.CatspeakOperator,
  value : string,
  location? : real,
) -> struct</code></pre><p>Creates a binary operator.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">operator</code></p><p>The operator type to use.</p></li><li><p><code class="inline-code">value</code></p><p>The value to apply the operator to.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this term.</p></li></ul></section><section><h1 class="heading" id="createself"><a href="#createself">§</a> createSelf</h1><pre><code>static createSelf = function(
  location? : real,
) -> struct</code></pre><p>Creates an instruction for accessing the caller <code class="inline-code">self</code>.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this term.</p></li></ul></section><section><h1 class="heading" id="createassign"><a href="#createassign">§</a> createAssign</h1><pre><code>static createAssign = function(
  type : enum.CatspeakAssign,
  lhs : struct,
  rhs : struct,
  location? : real,
) -> struct</code></pre><p>Attempts to assign a right-hand-side value to a left-hand-side target.</p><p>NOTE: Either terms A or B could be optimised or modified, therefore
you should always treat both terms as being invalid after
calling this method. Always use the result returned by this
method as the new source of truth.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">type</code></p><p>The assignment type to use.</p></li><li><p><code class="inline-code">lhs</code></p><p>The assignment target to use. Typically this is a local/global
variable get expression.</p></li><li><p><code class="inline-code">rhs</code></p><p>The assignment target to use. Typically this is a local/global
variable get expression.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this assignment.</p></li></ul></section><section><h1 class="heading" id="createstatement"><a href="#createstatement">§</a> createStatement</h1><pre><code>static createStatement = function(
  term : struct,
)</code></pre><p>Adds an existing node to the current block's statement list.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">term</code></p><p>The term to register to the current block.</p></li></ul></section><section><h1 class="heading" id="alloclocal"><a href="#alloclocal">§</a> allocLocal</h1><pre><code>static allocLocal = function(
  name : string,
  location? : real,
) -> struct</code></pre><p>Allocates a new local variable with the supplied name in the current
scope. Returns a term to get or set the value of this local variable.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">name</code></p><p>The name of the local variable to allocate.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this local variable.</p></li></ul></section><section><h1 class="heading" id="allocarg"><a href="#allocarg">§</a> allocArg</h1><pre><code>static allocArg = function(
  name : string,
  location? : real,
) -> struct</code></pre><p>Allocates a new named function argument with the supplied name.
Returns a term to get or set the value of this argument.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">name</code></p><p>The name of the local variable to allocate.</p></li><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this local variable.</p></li></ul></section><section><h1 class="heading" id="pushblock"><a href="#pushblock">§</a> pushBlock</h1><pre><code>static pushBlock = function(
  inherit? : bool,
)</code></pre><p>Starts a new local variable block scope. Any local variables
allocated in this scope will be cleared after [popBlock] is
called.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">inherit</code> <em>(optional)</em></p><p>Whether to write terms to the parent block or not. Defaults to
<code class="inline-code">false</code>, which will always create a new block term per local
scope.</p></li></ul></section><section><h1 class="heading" id="popblock"><a href="#popblock">§</a> popBlock</h1><pre><code>static popBlock = function(
  location? : real,
) -> struct</code></pre><p>Clears the most recent local scope and frees any allocated local
variables.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this block.</p></li></ul></section><section><h1 class="heading" id="pushfunction"><a href="#pushfunction">§</a> pushFunction</h1><pre><code>static pushFunction = function()</code></pre><p>Begins a new Catspeak function scope.</p><section><h2 class="heading" id="scopestop"><a href="#scopestop">§</a> ScopesTop</h2><pre><code>function ScopesTop()</code></pre><p>Undocumented!</p></section><section><h2 class="heading" id="_"><a href="#_">§</a> _</h2><pre><code>function _()</code></pre><p>Undocumented!</p></section><section><h2 class="heading" id="_"><a href="#_">§</a> _</h2><pre><code>function _()</code></pre><p>Undocumented!</p></section><section><h2 class="heading" id="_"><a href="#_">§</a> _</h2><pre><code>function _()</code></pre><p>Undocumented!</p></section><section><h2 class="heading" id="_"><a href="#_">§</a> _</h2><pre><code>function _()</code></pre><p>Undocumented!</p></section><section><h2 class="heading" id="_"><a href="#_">§</a> _</h2><pre><code>function _()</code></pre><p>Undocumented!</p></section></section><section><h1 class="heading" id="popfunction"><a href="#popfunction">§</a> popFunction</h1><pre><code>static popFunction = function(
  location? : real,
) -> struct</code></pre><p>Finalises a Catspeak function and inserts it into the list of
known functionScopes and returns its term.</p><p><strong>Arguments</strong></p><ul><li><p><code class="inline-code">location</code> <em>(optional)</em></p><p>The source location of this function definition.</p></li></ul><section><h2 class="heading" id="s"><a href="#s">§</a> s</h2><pre><code>function s()</code></pre><p>Undocumented!</p></section><section><h2 class="heading" id="scopestop"><a href="#scopestop">§</a> ScopesTop</h2><pre><code>function ScopesTop()</code></pre><p>Undocumented!</p></section></section></article></main></article><footer><hr><article><em id="brand">Built using Catlog, the <a href="https://www.katsaii.com/catspeak-lang/">Catspeak</a> book generator.</em></article><article></article></footer></body></html>